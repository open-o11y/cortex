<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.72.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel=alternate type=application/rss+xml href=/docs/api/index.xml><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>HTTP API | Cortex</title><meta property="og:title" content="HTTP API"><meta property="og:description" content="A horizontally scalable, highly available, multi-tenant, long term Prometheus."><meta property="og:type" content="website"><meta property="og:url" content="/docs/api/"><meta property="og:image" content="/images/logo-twitter-card.jpg"><meta property="og:site_name" content="Cortex"><meta itemprop=name content="HTTP API"><meta itemprop=description content="A horizontally scalable, highly available, multi-tenant, long term Prometheus."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/images/logo-twitter-card.jpg"><meta name=twitter:title content="HTTP API"><meta name=twitter:description content="A horizontally scalable, highly available, multi-tenant, long term Prometheus."><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-63872299-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=preload href=/scss/main.min.e90eaa454320b057abaa93e650772218ea4d1e3c83e8c45ecd880c9ee9f60107.css as=style><link href=/scss/main.min.e90eaa454320b057abaa93e650772218ea4d1e3c83e8c45ecd880c9ee9f60107.css rel=stylesheet integrity><link href=/css/offline-search.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.1.6/lunr.js></script><script src=/js/offline-search.js></script><title>HTTP API | Cortex</title></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar navbar-nocover"><a id=cortex-logo class=navbar-brand href=/><span class=navbar-logo><svg xmlns="http://www.w3.org/2000/svg" role="img" viewBox="-17.92 -14.92 1191.84 462.84"><defs><style>.cls-1{fill:#fff}</style></defs><path d="M214.531 8.017C99.353 8.017 5.65 101.72 5.65 216.899S99.353 425.78 214.531 425.78s208.882-93.704 208.882-208.882S329.71 8.017 214.531 8.017zm0 408.558c-110.102.0-199.676-89.574-199.676-199.676S104.429 17.222 214.53 17.222 414.208 106.797 414.208 216.9 324.633 416.575 214.53 416.575z" class="cls-1"/><circle cx="327.452" cy="221.633" r="34.571" class="cls-1"/><circle cx="213.713" cy="353.584" r="34.571" class="cls-1"/><path d="M299.992 167.913l-59-56.05a34.578 34.578.0 10-4.343 4.34l57.828 54.937a60.158 60.158.0 00-27.168 49.123h-12.97l-23.456-67.02-26.055 64.718H175.73l-24.724 57.22-21.808-54.524-.063.025v-.586h-22.048a34.582 34.582.0 10-.275 6.138h18.005l25.97 64.925 28.977-67.06h29.207l21.51-53.424 19.503 55.725H267.5a60.173 60.173.0 0025.202 44.11l-56.52 56.52 4.34 4.338 57.492-57.492a60.155 60.155.0 101.977-105.963zm81.481 53.515a54.02 54.02.0 11-54.022-54.02 54.083 54.083.0 0154.022 54.02zm175.707 42.568q-8.797 8.178-24.405 8.177a34.858 34.858.0 01-17.095-3.965 33.188 33.188.0 01-11.643-10.529 46.374 46.374.0 01-6.566-14.99 71.134 71.134.0 01-2.105-17.341 86.99 86.99.0 011.982-18.706 46.804 46.804.0 016.565-15.98 34.028 34.028.0 0112.263-11.149 7.675-4.21 19.077-4.212 13.38.0 21.306 6.69 7.927 6.689 10.405 18.829h21.803a50.76 50.76.0 00-5.946-19.696 44.06 44.06.0 00-12.015-13.75 49.842 49.842.0 00-16.848-8.051 77.44 77.44.0 00-20.44-2.601q-15.114.0-26.509 5.326a52.935 52.935.0 00-18.952 14.617 62.165 62.165.0 00-11.273 21.8 94.013 94.013.0 00-3.717 26.883 86.195 86.195.0 003.84 26.386 57.783 57.783.0 0011.397 20.686 50.138 50.138.0 0018.829 13.38 66.766 66.766.0 0025.891 4.705 24.527.0 38.772-12.882 14.245-12.878 17.715-36.668h-21.556q-1.986 14.867-10.776 23.041zm157.44-87.828a56.338 56.338.0 00-19.447-14.244q-11.52-5.203-26.882-5.203-15.115.0-26.756 5.203a56.009 56.009.0 00-19.573 14.244 59.75 59.75.0 00-11.892 21.307 85.299 85.299.0 00-3.965 26.386 84.117 84.117.0 003.965 26.262 59.853 59.853.0 0011.892 21.183 54.61 54.61.0 0019.573 14.12 11.643 5.077 26.756 5.08 15.36.0 26.882-5.08a54.908 54.908.0 0019.447-14.12 59.95 59.95.0 0011.892-21.183 84.181 84.181.0 003.965-26.262 85.364 85.364.0 00-3.965-26.386 59.846 59.846.0 00-11.892-21.307zm-9.538 68.38a43.305 43.305.0 01-8.548 15.113 37.061 37.061.0 01-12.759 9.29 38.825 38.825.0 01-30.968.0 37.003 37.003.0 01-12.76-9.29 43.209 43.209.0 01-8.547-15.114 70.669 70.669.0 010-41.373 44.634 44.634.0 018.547-15.237 36.428 36.428.0 0112.76-9.415 38.826 38.826.0 0130.968.0 36.484 36.484.0 0112.76 9.415 44.735 44.735.0 018.547 15.237 70.624 70.624.0 010 41.373zm81.141-80.89q-11.147 7.434-18.83 23.041h-.493v-27.005h-19.82V287.78h21.057v-56.984a87.528 87.528.0 012.478-21.924 41.993 41.993.0 017.93-16.228 33.951 33.951.0 0114.368-10.158q8.919-3.468 21.555-3.468V156.72q-17.097-.493-28.245 6.937zm80.761-42.366h-21.06v38.402h-21.8v18.581h21.8v81.51a48.668 48.668.0 001.734 14.37 17.432 17.432.0 005.326 8.423 20.57 20.57.0 009.415 4.088 75.59 75.59.0 0013.999 1.115h16.104v-18.582h-9.664a70.335 70.335.0 01-8.05-.37 10.361 10.361.0 01-4.833-1.611 6.108 6.108.0 01-2.354-3.469 23.006 23.006.0 01-.617-5.946v-79.528h25.518v-18.581h-25.518zm148.522 60.452a56.135 56.135.0 00-18.085-17.962q-11.276-7.063-28.367-7.06a58.263 58.263.0 00-24.155 4.953 56.796 56.796.0 00-19.079 13.875 63.949 63.949.0 00-12.51 21.058 77.064 77.064.0 00-4.461 26.758 102.521 102.521.0 004.338 27.004 58.87 58.87.0 0011.519 21.307 52.43 52.43.0 0018.953 13.873 11.272 4.954 26.632 4.955 21.8.0 36.173-10.901 14.364-10.898 18.58-32.455h-20.81q-2.73 12.635-11.272 18.829-8.549 6.198-21.927 6.195a43.577 43.577.0 01-18.085-3.468 35.417 35.417.0 01-12.636-9.291 36.127 36.127.0 01-7.184-13.38 50.746 50.746.0 01-1.981-15.98h95.879a102.07 102.07.0 00-2.107-24.526 71.064 71.064.0 00-9.415-23.784zm-84.357 29.73a43.81 43.81.0 013.219-13.999 37.354 37.354.0 0034.013 34.013.0 111.272-7.803 000 114.74-2.85 36.062 36.062 002.85 36.492 36.492.0 111.398 0036.107.0 17.68 11.52 43.253 0013.345 14.122zm170.95 7.184 44.1-58.964h-25.271l-31.961 44.843-30.721-44.843h-27.006l44.595 60.698-48.063 67.389h25.518l35.677-53.019 35.676 53.019h27.006l-49.55-69.123z" class="cls-1"/></svg></span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a href=https://twitter.com/cortexmetrics class="nav-link active"><span class=active><i class="fab fa-fw fa-twitter"></i>Twitter</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a href=https://github.com/cortexproject class="nav-link active"><span class=active><i class="fab fa-fw fa-github"></i>Github</span></a></li></ul></div><div class="navbar-nav d-none d-md-block"><div id=search-nav-container><input type=search id=search-input autocomplete=off class="form-control td-search-input" placeholder="&#xf002 Search this siteâ€¦" autocomplete=on><div id=search-results class=container></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><nav class="collapse td-sidebar-nav pt-2 pl-4" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a></li><ul><li class="collapse show" id=docs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/getting-started/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting Started</a></li><ul><li class=collapse id=docsgetting-started><a class="td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedgetting-started-chunks-storage href=/docs/getting-started/getting-started-chunks-storage/>Chunks Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedgetting-started-blocks-storage href=/docs/getting-started/getting-started-blocks-storage/>Blocks Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsgetting-startedgetting-started-with-gossiped-ring href=/docs/getting-started/getting-started-with-gossiped-ring/>Gossip Ring</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docsarchitecture href=/docs/architecture/>Architecture</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/production/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Production</a></li><ul><li class=collapse id=docsproduction><a class="td-sidebar-link td-sidebar-link__page" id=m-docsproductionrunning-in-production href=/docs/production/running-in-production/>Running Cortex in Production</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproductionaws href=/docs/production/aws/>Running Cortex with AWS Services</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproductioncassandra href=/docs/production/cassandra/>Running Cortex with Cassandra</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproductioncaching href=/docs/production/caching/>Caching in Cortex</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproductioningesters-with-wal href=/docs/production/ingesters-with-wal/>Ingesters with WAL</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproductiontls href=/docs/production/tls/>Securing communication between Cortex components with TLS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproductionauth href=/docs/production/auth/>Authentication and Authorisation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproductionha-pair-handling href=/docs/production/ha-pair-handling/>Config for sending HA Pairs data to Cortex</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/api/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">HTTP API</a></li><ul><li class="collapse show" id=docsapi></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/guides/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Guides</a></li><ul><li class=collapse id=docsguides><a class="td-sidebar-link td-sidebar-link__page" id=m-docsguidesdeleting-series href=/docs/guides/deleting-series/>Deleting Series</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsguidesgrpc-based-plugin href=/docs/guides/grpc-based-plugin/>gRPC storage plugin</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsguidesruler-sharding href=/docs/guides/ruler-sharding/>Config for horizontally scaling the Ruler</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsguidesshuffle-sharding href=/docs/guides/shuffle-sharding/>Shuffle Sharding</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsguideszone-aware-replication href=/docs/guides/zone-aware-replication/>Zone Aware Replication</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsguideskubernetes href=/docs/guides/kubernetes/>Running Cortex on Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsguidestracing href=/docs/guides/tracing/>Tracing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsguidesingesters-rolling-updates href=/docs/guides/ingesters-rolling-updates/>Ingesters rolling updates</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsguidescapacity-planning href=/docs/guides/capacity-planning/>Capacity Planning</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/configuration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Configuration</a></li><ul><li class=collapse id=docsconfiguration><a class="td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationconfiguration-file href=/docs/configuration/configuration-file/>Configuration file</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationarguments href=/docs/configuration/arguments/>Cortex Arguments Explained</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationprometheus-frontend href=/docs/configuration/prometheus-frontend/>Prometheus Frontend</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationschema-configuration href=/docs/configuration/schema-configuration/>Schema Configuration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationsingle-process-config href=/docs/configuration/single-process-config/>Single-process</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsconfigurationv1guarantees href=/docs/configuration/v1guarantees/>v1.x Guarantees</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/operations/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Operations</a></li><ul><li class=collapse id=docsoperations><a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsquery-auditor href=/docs/operations/query-auditor/>Query Auditor (tool)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsquery-tee href=/docs/operations/query-tee/>Query Tee (service)</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsrequests-mirroring-to-secondary-cluster href=/docs/operations/requests-mirroring-to-secondary-cluster/>Requests mirroring to secondary cluster</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsoperationsscaling-query-frontend href=/docs/operations/scaling-query-frontend/>Scaling the Query Frontend</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/blocks-storage/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Blocks Storage</a></li><ul><li class=collapse id=docsblocks-storage><a class="td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagequerier href=/docs/blocks-storage/querier/>Querier</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagestore-gateway href=/docs/blocks-storage/store-gateway/>Store-gateway</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagecompactor href=/docs/blocks-storage/compactor/>Compactor</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storageproduction-tips href=/docs/blocks-storage/production-tips/>Production tips</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagebinary-index-header href=/docs/blocks-storage/binary-index-header/>Binary index-header</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagemigrate-cortex-cluster-from-chunks-to-blocks href=/docs/blocks-storage/migrate-cortex-cluster-from-chunks-to-blocks/>Migrate Cortex cluster from chunks to blocks</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storageconvert-long-term-storage-from-chunks-to-blocks href=/docs/blocks-storage/convert-long-term-storage-from-chunks-to-blocks/>Convert long-term storage from chunks to blocks</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsblocks-storagemigrate-storage-from-thanos-and-prometheus href=/docs/blocks-storage/migrate-storage-from-thanos-and-prometheus/>Migrate the storage from Thanos and Prometheus</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/contributing/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contributing</a></li><ul><li class=collapse id=docscontributing><a class="td-sidebar-link td-sidebar-link__page" id=m-docscontributingdesign-patterns-and-code-conventions href=/docs/contributing/design-patterns-and-code-conventions/>Design patterns and Code conventions</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-run-the-website-locally href=/docs/contributing/how-to-run-the-website-locally/>How to run the website locally</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-upgrade-golang-version href=/docs/contributing/how-to-upgrade-golang-version/>How to upgrade Golang version</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-integration-tests-work href=/docs/contributing/how-integration-tests-work/>How integration tests work</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontributinghow-to-update-the-build-image href=/docs/contributing/how-to-update-the-build-image/>How to update the build image</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/case-studies/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Case Studies</a></li><ul><li class=collapse id=docscase-studies><a class="td-sidebar-link td-sidebar-link__page" id=m-docscase-studiesgojek href=/docs/case-studies/gojek/>Gojek</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscase-studiesrewe-digital href=/docs/case-studies/rewe-digital/>REWE digital</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/governance/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Governance</a></li><ul><li class=collapse id=docsgovernance><a class="td-sidebar-link td-sidebar-link__page" id=m-docsgovernancehow-to-add-a-maintainer href=/docs/governance/how-to-add-a-maintainer/>How to add a maintainer</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docschangelog href=/docs/changelog/>Changelog</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/proposals/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Proposals</a></li><ul><li class=collapse id=docsproposals><a class="td-sidebar-link td-sidebar-link__page" id=m-docsproposalsblocks-storage-sharding href=/docs/proposals/blocks-storage-sharding/>Blocks storage sharding</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproposalsdocumentation-versioning href=/docs/proposals/documentation-versioning/>Documentation Versioning</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproposalsgeneralize-modules href=/docs/proposals/generalize-modules/>Generalize Modules Service to make it extensible</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproposalshttp-api-design href=/docs/proposals/http-api-design/>HTTP API Design</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproposalsingesters-migration href=/docs/proposals/ingesters-migration/>Migrating ingesters from chunks to blocks and back.</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproposalsscalable-query-frontend href=/docs/proposals/scalable-query-frontend/>Scalable Query Frontend</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproposalsshuffle-sharding-and-zone-awareness href=/docs/proposals/shuffle-sharding-and-zone-awareness/>Shuffle sharding and zone awareness</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproposalsshuffle-sharding-on-the-read-path href=/docs/proposals/shuffle-sharding-on-the-read-path/>Shuffle sharding on the read path</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsproposalssupport-metadata-api href=/docs/proposals/support-metadata-api/>Support metadata API</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docscode-of-conduct href=/docs/code-of-conduct/>Code of Conduct</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsroadmap href=/docs/roadmap/>Roadmap</a></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cortexproject/cortex/edit/master/docs/api/_index.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/cortexproject/cortex/issues/new?title=HTTP%20API" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/cortexproject/cortex/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><a href=#endpoints>Endpoints</a><ul><li><a href=#path-prefixes>Path prefixes</a></li><li><a href=#authentication>Authentication</a></li></ul></li><li><a href=#all-services>All services</a><ul><li><a href=#index-page>Index page</a></li><li><a href=#configuration>Configuration</a></li><li><a href=#services-status>Services status</a></li><li><a href=#readiness-probe>Readiness probe</a></li><li><a href=#metrics>Metrics</a></li></ul></li><li><a href=#distributor>Distributor</a><ul><li><a href=#remote-write>Remote write</a></li><li><a href=#tenants-stats>Tenants stats</a></li><li><a href=#ha-tracker-status>HA tracker status</a></li></ul></li><li><a href=#ingester>Ingester</a><ul><li><a href=#flush-chunks--blocks>Flush chunks / blocks</a></li><li><a href=#shutdown>Shutdown</a></li><li><a href=#ingesters-ring-status>Ingesters ring status</a></li></ul></li><li><a href=#querier--query-frontend>Querier / Query-frontend</a><ul><li><a href=#instant-query>Instant query</a></li><li><a href=#range-query>Range query</a></li><li><a href=#get-series-by-label-matchers>Get series by label matchers</a></li><li><a href=#get-label-names>Get label names</a></li><li><a href=#get-label-values>Get label values</a></li><li><a href=#get-metric-metadata>Get metric metadata</a></li><li><a href=#remote-read>Remote read</a></li></ul></li><li><a href=#querier>Querier</a><ul><li><a href=#get-tenant-ingestion-stats>Get tenant ingestion stats</a></li><li><a href=#get-tenant-chunks>Get tenant chunks</a></li></ul></li><li><a href=#ruler>Ruler</a><ul><li><a href=#ruler-ring-status>Ruler ring status</a></li><li><a href=#list-rules>List rules</a></li><li><a href=#list-alerts>List alerts</a></li><li><a href=#list-rule-groups>List rule groups</a></li><li><a href=#get-rule-groups-by-namespace>Get rule groups by namespace</a></li><li><a href=#get-rule-group>Get rule group</a></li><li><a href=#set-rule-group>Set rule group</a></li><li><a href=#delete-rule-group>Delete rule group</a></li><li><a href=#delete-namespace>Delete namespace</a></li></ul></li><li><a href=#alertmanager>Alertmanager</a><ul><li><a href=#alertmanager-status>Alertmanager status</a></li><li><a href=#alertmanager-ui>Alertmanager UI</a></li><li><a href=#get-alertmanager-configuration>Get Alertmanager configuration</a></li><li><a href=#set-alertmanager-configuration>Set Alertmanager configuration</a></li><li><a href=#delete-alertmanager-configuration>Delete Alertmanager configuration</a></li></ul></li><li><a href=#purger>Purger</a><ul><li><a href=#delete-series>Delete series</a></li><li><a href=#list-delete-requests>List delete requests</a></li><li><a href=#cancel-delete-request>Cancel delete request</a></li></ul></li><li><a href=#store-gateway>Store-gateway</a><ul><li><a href=#store-gateway-ring-status>Store-gateway ring status</a></li></ul></li><li><a href=#compactor>Compactor</a><ul><li><a href=#compactor-ring-status>Compactor ring status</a></li></ul></li><li><a href=#configs-api>Configs API</a><ul><li></li><li><a href=#get-rule-files>Get rule files</a></li><li><a href=#set-rule-files>Set rule files</a></li><li><a href=#get-template-files>Get template files</a></li><li><a href=#set-template-files>Set template files</a></li><li><a href=#set-alertmanager-config-file>Set Alertmanager config file</a></li><li><a href=#validate-alertmanager-config-file>Validate Alertmanager config file</a></li><li><a href=#deactivate-configs>Deactivate configs</a></li><li><a href=#restore-configs>Restore configs</a></li></ul></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=/docs/>Documentation</a></li><li class="breadcrumb-item active" aria-current=page><a href=/docs/api/>HTTP API</a></li></ol></nav><div class=td-content><h1>HTTP API</h1><p>Cortex exposes an HTTP API for pushing and querying time series data, and operating the cluster itself.</p><p>For the sake of clarity, in this document we have grouped API endpoints by service, but keep in mind that they&rsquo;re exposed both when running Cortex in microservices and singly-binary mode:</p><ul><li><strong>Microservices</strong>: each service exposes its own endpoints</li><li><strong>Single-binary</strong>: the Cortex process exposes all API endpoints for the services running internally</li></ul><h2 id=endpoints>Endpoints</h2><table><thead><tr><th>API</th><th>Service</th><th>Endpoint</th></tr></thead><tbody><tr><td><a href=#index-page>Index page</a></td><td><em>All services</em></td><td><code>GET /</code></td></tr><tr><td><a href=#configuration>Configuration</a></td><td><em>All services</em></td><td><code>GET /config</code></td></tr><tr><td><a href=#services-status>Services status</a></td><td><em>All services</em></td><td><code>GET /services</code></td></tr><tr><td><a href=#readiness-probe>Readiness probe</a></td><td><em>All services</em></td><td><code>GET /ready</code></td></tr><tr><td><a href=#metrics>Metrics</a></td><td><em>All services</em></td><td><code>GET /metrics</code></td></tr><tr><td><a href=#remote-write>Remote write</a></td><td>Distributor</td><td><code>POST /api/v1/push</code></td></tr><tr><td><a href=#tenants-stats>Tenants stats</a></td><td>Distributor</td><td><code>GET /distributor/all_user_stats</code></td></tr><tr><td><a href=#ha-tracker-status>HA tracker status</a></td><td>Distributor</td><td><code>GET /distributor/ha_tracker</code></td></tr><tr><td><a href=#flush-chunks--blocks>Flush chunks / blocks</a></td><td>Ingester</td><td><code>GET,POST /ingester/flush</code></td></tr><tr><td><a href=#shutdown>Shutdown</a></td><td>Ingester</td><td><code>GET,POST /ingester/shutdown</code></td></tr><tr><td><a href=#ingesters-ring-status>Ingesters ring status</a></td><td>Ingester</td><td><code>GET /ingester/ring</code></td></tr><tr><td><a href=#instant-query>Instant query</a></td><td>Querier, Query-frontend</td><td><code>GET,POST &lt;prometheus-http-prefix>/api/v1/query</code></td></tr><tr><td><a href=#range-query>Range query</a></td><td>Querier, Query-frontend</td><td><code>GET,POST &lt;prometheus-http-prefix>/api/v1/query_range</code></td></tr><tr><td><a href=#get-series-by-label-matchers>Get series by label matchers</a></td><td>Querier, Query-frontend</td><td><code>GET,POST &lt;prometheus-http-prefix>/api/v1/series</code></td></tr><tr><td><a href=#get-label-names>Get label names</a></td><td>Querier, Query-frontend</td><td><code>GET,POST &lt;prometheus-http-prefix>/api/v1/labels</code></td></tr><tr><td><a href=#get-label-values>Get label values</a></td><td>Querier, Query-frontend</td><td><code>GET &lt;prometheus-http-prefix>/api/v1/label/{name}/values</code></td></tr><tr><td><a href=#get-metric-metadata>Get metric metadata</a></td><td>Querier, Query-frontend</td><td><code>GET &lt;prometheus-http-prefix>/api/v1/metadata</code></td></tr><tr><td><a href=#remote-read>Remote read</a></td><td>Querier, Query-frontend</td><td><code>POST &lt;prometheus-http-prefix>/api/v1/read</code></td></tr><tr><td><a href=#get-tenant-ingestion-stats>Get tenant ingestion stats</a></td><td>Querier</td><td><code>GET /api/v1/user_stats</code></td></tr><tr><td><a href=#get-tenant-chunks>Get tenant chunks</a></td><td>Querier</td><td><code>GET /api/v1/chunks</code></td></tr><tr><td><a href=#ruler-ring-status>Ruler ring status</a></td><td>Ruler</td><td><code>GET /ruler/ring</code></td></tr><tr><td><a href=#list-rules>List rules</a></td><td>Ruler</td><td><code>GET &lt;prometheus-http-prefix>/api/v1/rules</code></td></tr><tr><td><a href=#list-alerts>List alerts</a></td><td>Ruler</td><td><code>GET &lt;prometheus-http-prefix>/api/v1/alerts</code></td></tr><tr><td><a href=#list-rule-groups>List rule groups</a></td><td>Ruler</td><td><code>GET /api/v1/rules</code></td></tr><tr><td><a href=#get-rule-groups-by-namespace>Get rule groups by namespace</a></td><td>Ruler</td><td><code>GET /api/v1/rules/{namespace}</code></td></tr><tr><td><a href=#get-rule-group>Get rule group</a></td><td>Ruler</td><td><code>GET /api/v1/rules/{namespace}/{groupName}</code></td></tr><tr><td><a href=#set-rule-group>Set rule group</a></td><td>Ruler</td><td><code>POST /api/v1/rules/{namespace}</code></td></tr><tr><td><a href=#delete-rule-group>Delete rule group</a></td><td>Ruler</td><td><code>DELETE /api/v1/rules/{namespace}/{groupName}</code></td></tr><tr><td><a href=#delete-namespace>Delete namespace</a></td><td>Ruler</td><td><code>DELETE /api/v1/rules/{namespace}</code></td></tr><tr><td><a href=#alertmanager-status>Alertmanager status</a></td><td>Alertmanager</td><td><code>GET /multitenant_alertmanager/status</code></td></tr><tr><td><a href=#alertmanager-ui>Alertmanager UI</a></td><td>Alertmanager</td><td><code>GET /&lt;alertmanager-http-prefix></code></td></tr><tr><td><a href=#get-alertmanager-configuration>Get Alertmanager configuration</a></td><td>Alertmanager</td><td><code>GET /api/v1/alerts</code></td></tr><tr><td><a href=#set-alertmanager-configuration>Set Alertmanager configuration</a></td><td>Alertmanager</td><td><code>POST /api/v1/alerts</code></td></tr><tr><td><a href=#delete-alertmanager-configuration>Delete Alertmanager configuration</a></td><td>Alertmanager</td><td><code>DELETE /api/v1/alerts</code></td></tr><tr><td><a href=#delete-series>Delete series</a></td><td>Purger</td><td><code>PUT,POST &lt;prometheus-http-prefix>/api/v1/admin/tsdb/delete_series</code></td></tr><tr><td><a href=#list-delete-requests>List delete requests</a></td><td>Purger</td><td><code>GET &lt;prometheus-http-prefix>/api/v1/admin/tsdb/delete_series</code></td></tr><tr><td><a href=#cancel-delete-request>Cancel delete request</a></td><td>Purger</td><td><code>PUT,POST &lt;prometheus-http-prefix>/api/v1/admin/tsdb/cancel_delete_request</code></td></tr><tr><td><a href=#store-gateway-ring-status>Store-gateway ring status</a></td><td>Store-gateway</td><td><code>GET /store-gateway/ring</code></td></tr><tr><td><a href=#compactor-ring-status>Compactor ring status</a></td><td>Compactor</td><td><code>GET /compactor/ring</code></td></tr><tr><td><a href=#get-rule-files>Get rule files</a></td><td>Configs API (deprecated)</td><td><code>GET /api/prom/configs/rules</code></td></tr><tr><td><a href=#set-rule-files>Set rule files</a></td><td>Configs API (deprecated)</td><td><code>POST /api/prom/configs/rules</code></td></tr><tr><td><a href=#get-template-files>Get template files</a></td><td>Configs API (deprecated)</td><td><code>GET /api/prom/configs/templates</code></td></tr><tr><td><a href=#set-template-files>Set template files</a></td><td>Configs API (deprecated)</td><td><code>POST /api/prom/configs/templates</code></td></tr><tr><td><a href=#get-alertmanager-config-file>Get Alertmanager config file</a></td><td>Configs API (deprecated)</td><td><code>GET /api/prom/configs/alertmanager</code></td></tr><tr><td><a href=#set-alertmanager-config-file>Set Alertmanager config file</a></td><td>Configs API (deprecated)</td><td><code>POST /api/prom/configs/alertmanager</code></td></tr><tr><td><a href=#validate-alertmanager-config-file>Validate Alertmanager config</a></td><td>Configs API (deprecated)</td><td><code>POST /api/prom/configs/alertmanager/validate</code></td></tr><tr><td><a href=#deactivate-configs>Deactivate configs</a></td><td>Configs API (deprecated)</td><td><code>DELETE /api/prom/configs/deactivate</code></td></tr><tr><td><a href=#restore-configs>Restore configs</a></td><td>Configs API (deprecated)</td><td><code>POST /api/prom/configs/restore</code></td></tr></tbody></table><h3 id=path-prefixes>Path prefixes</h3><p>In this documentation you will find the usage of some placeholders for the path prefixes, whenever the prefix is configurable. The following table shows the supported prefixes.</p><table><thead><tr><th>Prefix</th><th>Default</th><th>CLI Flag</th><th>YAML Config</th></tr></thead><tbody><tr><td><code>&lt;legacy-http-prefix></code></td><td><code>/api/prom</code></td><td><code>-http.prefix</code></td><td><code>http_prefix</code></td></tr><tr><td><code>&lt;prometheus-http-prefix></code></td><td><code>/prometheus</code></td><td><code>-http.prometheus-http-prefix</code></td><td><code>api > prometheus_http_prefix</code></td></tr><tr><td><code>&lt;alertmanager-http-prefix></code></td><td><code>/alertmanager</code></td><td><code>-http.alertmanager-http-prefix</code></td><td><code>api > alertmanager_http_prefix</code></td></tr></tbody></table><h3 id=authentication>Authentication</h3><p>When multi-tenancy is enabled, endpoints requiring authentication are expected to be called with the <code>X-Scope-OrgID</code> HTTP request header set to the tenant ID. Otherwise, when multi-tenancy is disabled, Cortex doesn&rsquo;t require any request to have the <code>X-Scope-OrgID</code> header.</p><p>Multi-tenancy can be enabled/disabled via the CLI flag <code>-auth.enabled</code> or its respective YAML config option.</p><p><em>For more information, please refer to the dedicated <a href=/docs/production/auth/>Authentication and Authorisation</a> guide.</em></p><h2 id=all-services>All services</h2><p>The following API endpoints are exposed by all services.</p><h3 id=index-page>Index page</h3><pre><code>GET /
</code></pre><p>Displays an index page with links to other web pages exposed by Cortex.</p><h3 id=configuration>Configuration</h3><pre><code>GET /config
</code></pre><p>Displays the configuration currently applied to Cortex (in YAML format), including default values and settings via CLI flags. Sensitive data is masked. Please be aware that the exported configuration <strong>doesn&rsquo;t include the per-tenant overrides</strong>.</p><h3 id=services-status>Services status</h3><pre><code>GET /services
</code></pre><p>Displays a web page with the status of internal Cortex services.</p><h3 id=readiness-probe>Readiness probe</h3><pre><code>GET /ready
</code></pre><p>Returns 200 when Cortex is ready to serve traffic.</p><h3 id=metrics>Metrics</h3><pre><code>GET /metrics
</code></pre><p>Returns the metrics for the running Cortex service in the Prometheus exposition format.</p><h2 id=distributor>Distributor</h2><h3 id=remote-write>Remote write</h3><pre><code>POST /api/v1/push

# Legacy
POST &lt;legacy-http-prefix&gt;/push
</code></pre><p>Entrypoint for the <a href=https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write>Prometheus remote write</a>.</p><p>This API endpoint accepts an HTTP POST request with a body containing a request encoded with <a href=https://developers.google.com/protocol-buffers>Protocol Buffers</a> and compressed with <a href=https://github.com/google/snappy>Snappy</a>. The definition of the protobuf message can be found in <a href=https://github.com/cortexproject/cortex/blob/master/pkg/ingester/client/cortex.proto#28><code>cortex.proto</code></a>. The HTTP request should contain the header <code>X-Prometheus-Remote-Write-Version</code> set to <code>0.1.0</code>.</p><p><em>For more information, please check out Prometheus <a href=https://prometheus.io/docs/prometheus/latest/storage/#remote-storage-integrations>Remote storage integrations</a>.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=tenants-stats>Tenants stats</h3><pre><code>GET /distributor/all_user_stats

# Legacy
GET /all_user_stats
</code></pre><p>Displays a web page with per-tenant statistics updated in realtime, including the total number of active series across all ingesters and the current ingestion rate (samples / sec).</p><h3 id=ha-tracker-status>HA tracker status</h3><pre><code>GET /distributor/ha_tracker

# Legacy
GET /ha-tracker
</code></pre><p>Displays a web page with the current status of the HA tracker, including the elected replica for each Prometheus HA cluster.</p><h2 id=ingester>Ingester</h2><h3 id=flush-chunks--blocks>Flush chunks / blocks</h3><pre><code>GET,POST /ingester/flush

# Legacy
GET,POST /flush
</code></pre><p>Triggers a flush of the in-memory time series data (chunks or blocks) to the long-term storage. This endpoint triggers the flush also when <code>-ingester.flush-on-shutdown-with-wal-enabled</code> or <code>-blocks-storage.tsdb.flush-blocks-on-shutdown</code> are disabled.</p><h3 id=shutdown>Shutdown</h3><pre><code>GET,POST /ingester/shutdown

# Legacy
GET,POST /shutdown
</code></pre><p>Flushes in-memory time series data from ingester to the long-term storage, and shuts down the ingester service. Notice that the other Cortex services are still running, and the operator (or any automation) is expected to terminate the process with a <code>SIGINT</code> / <code>SIGTERM</code> signal after the shutdown endpoint returns. In the meantime, <code>/ready</code> will not return 200.</p><p><em>This API endpoint is usually used by scale down automations.</em></p><h3 id=ingesters-ring-status>Ingesters ring status</h3><pre><code>GET /ingester/ring

# Legacy
GET /ring
</code></pre><p>Displays a web page with the ingesters hash ring status, including the state, healthy and last heartbeat time of each ingester.</p><h2 id=querier--query-frontend>Querier / Query-frontend</h2><p>The following endpoints are exposed both by the querier and query-frontend.</p><h3 id=instant-query>Instant query</h3><pre><code>GET,POST &lt;prometheus-http-prefix&gt;/api/v1/query

# Legacy
GET,POST &lt;legacy-http-prefix&gt;/api/v1/query
</code></pre><p>Prometheus-compatible instant query endpoint.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#instant-queries>instant query</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=range-query>Range query</h3><pre><code>GET,POST &lt;prometheus-http-prefix&gt;/api/v1/query_range

# Legacy
GET,POST &lt;legacy-http-prefix&gt;/api/v1/query_range
</code></pre><p>Prometheus-compatible range query endpoint. When the request is sent through the query-frontend, the query will be accelerated by query-frontend (results caching and execution parallelisation).</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#range-queries>range query</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=get-series-by-label-matchers>Get series by label matchers</h3><pre><code>GET,POST &lt;prometheus-http-prefix&gt;/api/v1/series

# Legacy
GET,POST &lt;legacy-http-prefix&gt;/api/v1/series
</code></pre><p>Find series by label matchers. Differently than Prometheus and due to scalability and performances reasons, Cortex currently ignores the <code>start</code> and <code>end</code> request parameters and always fetches the series from in-memory data stored in the ingesters.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#finding-series-by-label-matchers>series endpoint</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=get-label-names>Get label names</h3><pre><code>GET,POST &lt;prometheus-http-prefix&gt;/api/v1/labels

# Legacy
GET,POST &lt;legacy-http-prefix&gt;/api/v1/labels
</code></pre><p>Get label names of ingested series. Differently than Prometheus and due to scalability and performances reasons, Cortex currently ignores the <code>start</code> and <code>end</code> request parameters and always fetches the label names from in-memory data stored in the ingesters.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#getting-label-names>get label names</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=get-label-values>Get label values</h3><pre><code>GET &lt;prometheus-http-prefix&gt;/api/v1/label/{name}/values

# Legacy
GET &lt;legacy-http-prefix&gt;/api/v1/label/{name}/values
</code></pre><p>Get label values for a given label name. Differently than Prometheus and due to scalability and performances reasons, Cortex currently ignores the <code>start</code> and <code>end</code> request parameters and always fetches the label values from in-memory data stored in the ingesters.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#querying-label-values>get label values</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=get-metric-metadata>Get metric metadata</h3><pre><code>GET &lt;prometheus-http-prefix&gt;/api/v1/metadata

# Legacy
GET &lt;legacy-http-prefix&gt;/api/v1/metadata
</code></pre><p>Prometheus-compatible metric metadata endpoint.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#querying-metric-metadata>metric metadata</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=remote-read>Remote read</h3><pre><code>POST &lt;prometheus-http-prefix&gt;/api/v1/read

# Legacy
POST &lt;legacy-http-prefix&gt;/api/v1/read
</code></pre><p>Prometheus-compatible <a href=https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_read>remote read</a> endpoint.</p><p><em>For more information, please check out Prometheus <a href=https://prometheus.io/docs/prometheus/latest/storage/#remote-storage-integrations>Remote storage integrations</a>.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h2 id=querier>Querier</h2><h3 id=get-tenant-ingestion-stats>Get tenant ingestion stats</h3><pre><code>GET /api/v1/user_stats

# Legacy
GET &lt;legacy-http-prefix&gt;/user_stats
</code></pre><p>Returns realtime ingestion rate, for the authenticated tenant, in <code>JSON</code> format.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=get-tenant-chunks>Get tenant chunks</h3><pre><code>GET /api/v1/chunks

# Legacy
GET &lt;legacy-http-prefix&gt;/chunks
</code></pre><p>Fetch a compressed tar of all the chunks containing samples for the given time range and label matchers. This endpoint is supported only by the <strong>chunks storage</strong>, requires <code>-querier.ingester-streaming=true</code> and should <strong>not be exposed to users</strong> but just used for debugging purposes.</p><table><thead><tr><th>URL query parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>start</code></td><td>Start timestamp, in RFC3339 format or unix epoch.</td></tr><tr><td><code>end</code></td><td>End timestamp, in RFC3339 format or unix epoch.</td></tr><tr><td><code>matcher</code></td><td>Label matcher that selects the series for which chunks should be fetched.</td></tr></tbody></table><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h2 id=ruler>Ruler</h2><p>The ruler API endpoints require to configure a backend object storage to store the recording rules and alerts. The ruler API uses the concept of a &ldquo;namespace&rdquo; when creating rule groups. This is a stand in for the name of the rule file in Prometheus and rule groups must be named uniquely within a namespace.</p><h3 id=ruler-ring-status>Ruler ring status</h3><pre><code>GET /ruler/ring

# Legacy
GET /ruler_ring
</code></pre><p>Displays a web page with the ruler hash ring status, including the state, healthy and last heartbeat time of each ruler.</p><h3 id=list-rules>List rules</h3><pre><code>GET &lt;prometheus-http-prefix&gt;/api/v1/rules

# Legacy
GET &lt;legacy-http-prefix&gt;/api/v1/rules
</code></pre><p>Prometheus-compatible rules endpoint to list alerting and recording rules that are currently loaded.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#rules>rules</a> documentation.</em></p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=list-alerts>List alerts</h3><pre><code>GET &lt;prometheus-http-prefix&gt;/api/v1/alerts

# Legacy
GET &lt;legacy-http-prefix&gt;/api/v1/alerts
</code></pre><p>Prometheus-compatible rules endpoint to list of all active alerts.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#alerts>alerts</a> documentation.</em></p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=list-rule-groups>List rule groups</h3><pre><code>GET /api/v1/rules

# Legacy
GET &lt;legacy-http-prefix&gt;/rules
</code></pre><p>List all rules configured for the authenticated tenant. This endpoint returns a YAML dictionary with all the rule groups for each namespace and <code>200</code> status code on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h4 id=example-response>Example response</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>---<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>&lt;namespace1&gt;</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>  interval: &lt;duration;optional&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>rules</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>record</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>      expr: &lt;string&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>alert</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>      expr: &lt;string&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>for</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;duration<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>      annotations:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>&lt;annotation_name&gt;</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>      labels:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>&lt;label_name&gt;</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string&gt;<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>  interval: &lt;duration;optional&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>rules</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>record</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>      expr: &lt;string&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>alert</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>      expr: &lt;string&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>for</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;duration<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>      annotations:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>&lt;annotation_name&gt;</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>      labels:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>&lt;label_name&gt;</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string&gt;<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>&lt;namespace2&gt;</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>  interval: &lt;duration;optional&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>rules</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>record</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>      expr: &lt;string&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>alert</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>      expr: &lt;string&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>for</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;duration<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>      annotations:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>&lt;annotation_name&gt;</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>      labels:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>&lt;label_name&gt;</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string&gt;<span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=get-rule-groups-by-namespace>Get rule groups by namespace</h3><pre><code>GET /api/v1/rules/{namespace}

# Legacy
GET &lt;legacy-http-prefix&gt;/rules/{namespace}
</code></pre><p>Returns the rule groups defined for a given namespace.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h4 id=example-response-1>Example response</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string&gt;<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>interval</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;duration;optional&gt;<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>rules</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>record</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>    expr: &lt;string&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>alert</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>    expr: &lt;string&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>for</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;duration<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>    annotations:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>&lt;annotation_name&gt;</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>    labels:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>&lt;label_name&gt;</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string&gt;<span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=get-rule-group>Get rule group</h3><pre><code>GET /api/v1/rules/{namespace}/{groupName}

# Legacy
GET &lt;legacy-http-prefix&gt;/rules/{namespace}/{groupName}
</code></pre><p>Returns the rule group matching the request namespace and group name.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=set-rule-group>Set rule group</h3><pre><code>POST /api/v1/rules/{namespace}

# Legacy
POST &lt;legacy-http-prefix&gt;/rules/{namespace}
</code></pre><p>Creates or updates a rule group. This endpoint expects a request with <code>Content-Type: application/yaml</code> header and the rules <strong>YAML</strong> definition in the request body, and returns <code>202</code> on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h4 id=example-request>Example request</h4><p>Request headers:</p><ul><li><code>Content-Type: application/yaml</code></li></ul><p>Request body:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string&gt;<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>interval</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;duration;optional&gt;<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>rules</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>record</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>    expr: &lt;string&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>alert</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>    expr: &lt;string&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>for</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;duration<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>    annotations:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>&lt;annotation_name&gt;</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string<span style=color:#8f5902;font-style:italic>&gt;
</span><span style=color:#8f5902;font-style:italic>    labels:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>&lt;label_name&gt;</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>&lt;string&gt;<span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=delete-rule-group>Delete rule group</h3><pre><code>DELETE /api/v1/rules/{namespace}/{groupName}

# Legacy
DELETE &lt;legacy-http-prefix&gt;/rules/{namespace}/{groupName}
</code></pre><p>Deletes a rule group by namespace and group name. This endpoints returns <code>202</code> on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=delete-namespace>Delete namespace</h3><pre><code>DELETE /api/v1/rules/{namespace}

# Legacy
DELETE &lt;legacy-http-prefix&gt;/rules/{namespace}
</code></pre><p>Deletes all the rule groups in a namespace (including the namespace itself). This endpoint returns <code>202</code> on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.ruler.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h2 id=alertmanager>Alertmanager</h2><h3 id=alertmanager-status>Alertmanager status</h3><pre><code>GET /multitenant_alertmanager/status

# Legacy (microservices mode only)
GET /status
</code></pre><p>Displays a web page with the current status of the Alertmanager, including the Alertmanager cluster members.</p><h3 id=alertmanager-ui>Alertmanager UI</h3><pre><code>GET /&lt;alertmanager-http-prefix&gt;

# Legacy (microservices mode only)
GET /&lt;legacy-http-prefix&gt;
</code></pre><p>Displays the Alertmanager UI.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=get-alertmanager-configuration>Get Alertmanager configuration</h3><pre><code>GET /api/v1/alerts
</code></pre><p>Get the current Alertmanager configuration for the authenticated tenant, reading it from the configured object storage.</p><p>This endpoint doesn&rsquo;t accept any URL query parameter and returns <code>200</code> on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.alertmanager.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=set-alertmanager-configuration>Set Alertmanager configuration</h3><pre><code>POST /api/v1/alerts
</code></pre><p>Stores or updates the Alertmanager configuration for the authenticated tenant. The Alertmanager configuration is stored in the configured backend object storage.</p><p>This endpoint expects the Alertmanager <strong>YAML</strong> configuration in the request body and returns <code>201</code> on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.alertmanager.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h4 id=example-request-body>Example request body</h4><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>template_files</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>default_template</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>|
</span><span style=color:#8f5902;font-style:italic>    {{ define &#34;__alertmanager&#34; }}AlertManager{{ end }}</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>{{<span style=color:#f8f8f8;text-decoration:underline> </span>define<span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;__alertmanagerURL&#34;</span><span style=color:#f8f8f8;text-decoration:underline> </span>}}{{<span style=color:#f8f8f8;text-decoration:underline> </span>.ExternalURL<span style=color:#f8f8f8;text-decoration:underline> </span>}}/<span style=color:#8f5902;font-style:italic>#/alerts?receiver={{ .Receiver | urlquery }}{{ end }}</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>alertmanager_config</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#8f5902;font-style:italic>|
</span><span style=color:#8f5902;font-style:italic>  global:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>smtp_smarthost</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;localhost:25&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>smtp_from</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;youraddress@example.org&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>route</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>receiver</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>example-email<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>receivers</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>example-email<span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>email_configs</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>      </span>- <span style=color:#204a87;font-weight:700>to</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;youraddress@example.org&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><h3 id=delete-alertmanager-configuration>Delete Alertmanager configuration</h3><pre><code>DELETE /api/v1/alerts
</code></pre><p>Deletes the Alertmanager configuration for the authenticated tenant.</p><p>This endpoint doesn&rsquo;t accept any URL query parameter and returns <code>200</code> on success.</p><p><em>This experimental endpoint is disabled by default and can be enabled via the <code>-experimental.alertmanager.enable-api</code> CLI flag (or its respective YAML config option).</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h2 id=purger>Purger</h2><p>The Purger service provides APIs for requesting deletion of series in chunks storage and managing delete requests. For more information about it, please read the <a href=/docs/guides/deleting-series/>Delete series Guide</a>.</p><h3 id=delete-series>Delete series</h3><pre><code>PUT,POST &lt;prometheus-http-prefix&gt;/api/v1/admin/tsdb/delete_series

# Legacy
PUT,POST &lt;legacy-http-prefix&gt;/api/v1/admin/tsdb/delete_series
</code></pre><p>Prometheus-compatible delete series endpoint.</p><p><em>For more information, please check out the Prometheus <a href=https://prometheus.io/docs/prometheus/latest/querying/api/#delete-series>delete series</a> documentation.</em></p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=list-delete-requests>List delete requests</h3><pre><code>GET &lt;prometheus-http-prefix&gt;/api/v1/admin/tsdb/delete_series

# Legacy
GET &lt;legacy-http-prefix&gt;/api/v1/admin/tsdb/delete_series
</code></pre><p>List all the delete requests.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=cancel-delete-request>Cancel delete request</h3><pre><code>PUT,POST &lt;prometheus-http-prefix&gt;/api/v1/admin/tsdb/cancel_delete_request

# Legacy
PUT,POST &lt;legacy-http-prefix&gt;/api/v1/admin/tsdb/cancel_delete_request
</code></pre><p>Cancel a delete request while the request is still in the grace period (before the request is effectively processed by the purger and time series data is hard-deleted from the storage).</p><table><thead><tr><th>URL query parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>request_id</code></td><td>Deletion request ID to cancel. Can be obtained by the <a href=#list-delete-requests>List delete requests</a> endpoint.</td></tr></tbody></table><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h2 id=store-gateway>Store-gateway</h2><h3 id=store-gateway-ring-status>Store-gateway ring status</h3><pre><code>GET /store-gateway/ring
</code></pre><p>Displays a web page with the store-gateway hash ring status, including the state, healthy and last heartbeat time of each store-gateway.</p><h2 id=compactor>Compactor</h2><h3 id=compactor-ring-status>Compactor ring status</h3><pre><code>GET /compactor/ring
</code></pre><p>Displays a web page with the compactor hash ring status, including the state, healthy and last heartbeat time of each compactor.</p><h2 id=configs-api>Configs API</h2><p><em>This service has been <strong>deprecated</strong> in favour of <a href=#ruler>Ruler</a> and <a href=#alertmanager>Alertmanager</a> API.</em></p><p>The configs API service provides an API-driven multi-tenant approach to handling various configuration files for Prometheus. The service hosts an API where users can read and write Prometheus rule files, Alertmanager configuration files, and Alertmanager templates to a database. Each tenant will have its own set of rule files, Alertmanager config, and templates.</p><h4 id=request--response-schema>Request / response schema</h4><p>The following schema is used both when retrieving the current configs from the API and when setting new configs via the API:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>&#34;id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>99</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;rule_format_version&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;alertmanager_config&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&lt;standard alertmanager.yaml config&gt;&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#204a87;font-weight:700>&#34;rules_files&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87;font-weight:700>&#34;rules.yaml&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&lt;standard rules.yaml config&gt;&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;rules2.yaml&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&lt;standard rules.yaml config&gt;&#34;</span>
     <span style=color:#000;font-weight:700>},</span>
    <span style=color:#204a87;font-weight:700>&#34;template_files&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87;font-weight:700>&#34;templates.tmpl&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&lt;standard template file&gt;&#34;</span><span style=color:#000;font-weight:700>,</span>
        <span style=color:#204a87;font-weight:700>&#34;templates2.tmpl&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&lt;standard template file&gt;&#34;</span>
    <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><ul><li><strong><code>id</code></strong><br>Should be incremented every time data is updated; Cortex will use the config with the highest number.</li><li><strong><code>rule_format_version</code></strong><br>Allows compatibility for tenants with config in Prometheus V1 format. Pass &ldquo;1&rdquo; or &ldquo;2&rdquo; according to which Prometheus version you want to match.</li><li><strong><code>alertmanager_config</code></strong><br>The contents of the alertmanager config file should be as described <a href=https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/>here</a>, encoded as a single string to fit within the overall JSON payload.</li><li><strong><code>config.rules_files</code></strong><br>The contents of a rules file should be as described <a href=http://prometheus.io/docs/prometheus/latest/configuration/recording_rules/>here</a>, encoded as a single string to fit within the overall JSON payload.</li><li><strong><code>config.template_files</code></strong><br>The contents of a template file should be as described <a href=https://prometheus.io/docs/alerting/notification_examples/#defining-reusable-templates>here</a>, encoded as a single string to fit within the overall JSON payload.</li></ul><h3 id=get-rule-files>Get rule files</h3><pre><code>GET /api/prom/configs/rules
</code></pre><p>Get the current rule files for the authenticated tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=set-rule-files>Set rule files</h3><pre><code>POST /api/prom/configs/rules
</code></pre><p>Replace the current rule files for the authenticated tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=get-template-files>Get template files</h3><pre><code>GET /api/prom/configs/templates
</code></pre><p>Get the current template files for the authenticated tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=set-template-files>Set template files</h3><pre><code>POST /api/prom/configs/templates
</code></pre><p>Replace the current template files for the authenticated tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h4 id=get-alertmanager-config-file>Get Alertmanager config file</h4><pre><code>GET /api/prom/configs/alertmanager
</code></pre><p>Get the current Alertmanager config for the authenticated tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=set-alertmanager-config-file>Set Alertmanager config file</h3><pre><code>POST /api/prom/configs/alertmanager
</code></pre><p>Replace the current Alertmanager config for the authenticated tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=validate-alertmanager-config-file>Validate Alertmanager config file</h3><pre><code>POST /api/prom/configs/alertmanager/validate
</code></pre><p>Validate the Alertmanager config in the request body. The request body is expected to contain only the Alertmanager YAML config.</p><h3 id=deactivate-configs>Deactivate configs</h3><pre><code>DELETE /api/prom/configs/deactivate
</code></pre><p>Disable configs for the authenticated tenant. Please be aware that setting a new config will effectively &ldquo;re-enable&rdquo; the Rules and Alertmanager configuration for the tenant.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><h3 id=restore-configs>Restore configs</h3><pre><code>POST /api/prom/configs/restore
</code></pre><p>Re-enable configs for the authenticated tenant, after being previously deactivated.</p><p><em>Requires <a href=#authentication>authentication</a>.</em></p><ul></ul><div class="text-muted mt-5 pt-3 border-top"></div></div></main></div></div><footer class="row td-box td-box--dark td-box--gradient td-box--height-auto text-white p-5"><div class="col-12 col-sm-4 pb-5 pb-sm-0"><img src=/images/cortex-stacked-white.png width=75px class="img-fluid float-left"></div><div class="col-12 col-sm-4 pb-5 pb-sm-0"><h6 class=font-weight-bold>Community</h6><ul class=list-unstyled><li><a href=https://slack.cncf.io class="text-reset text-white"><i class="fab fa-fw fa-slack"></i>Slack</a></li><li><a href=https://github.com/cortexproject/cortex class="text-reset text-white"><i class="fab fa-fw fa-github"></i>GitHub</a></li><li><a href=https://twitter.com/cortexmetrics class="text-reset text-white"><i class="fab fa-fw fa-twitter"></i>Twitter</a></li></ul></div><div class="col-12 col-sm-4"><h6 class=font-weight-bold>About</h6><p>Cortex is an OSS licensed project as Apache License 2.0</p></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.29b0315468c00226fa6f4556a9cebc0ac4fe1ce1457a01b22c0a06b329877383.js integrity="sha256-KbAxVGjAAib6b0VWqc68CsT+HOFFegGyLAoGsymHc4M=" crossorigin=anonymous></script></body></html>